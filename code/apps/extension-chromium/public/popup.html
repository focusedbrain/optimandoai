<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Command Chat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root{
        --bg:#0b1220;
        --text:#e5e7eb;
        --surface:rgba(255,255,255,0.06);
        --border:rgba(255,255,255,0.14);
        --muted:rgba(255,255,255,0.55);
        --btn-surface:rgba(255,255,255,0.15);
        --bubble-user-bg:rgba(34,197,94,0.12);
        --bubble-user-border:rgba(34,197,94,0.45);
        --bubble-assist-bg:rgba(255,255,255,0.10);
        --bubble-assist-border:rgba(255,255,255,0.20);
      }
      .theme-default{
        /* Purple gradient like extension default */
        --bg-grad: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --bg:#1e1b4b; /* fallback under gradient */
        --text:#ffffff;
        --surface: rgba(255,255,255,0.10);
        --border: rgba(255,255,255,0.20);
        --muted: rgba(255,255,255,0.85);
        --btn-surface: rgba(255,255,255,0.15);
        --bubble-user-bg: rgba(34,197,94,0.14);
        --bubble-user-border: rgba(34,197,94,0.55);
        --bubble-assist-bg: rgba(255,255,255,0.12);
        --bubble-assist-border: rgba(255,255,255,0.22);
      }
      .theme-professional{
        --bg:#f8fafc;
        --text:#0f172a;
        --surface:#ffffff;
        --border:#e2e8f0;
        --muted:#475569;
        --btn-surface:#e2e8f0;
        --bubble-user-bg:#e6f7ee;
        --bubble-user-border:#a7f3d0;
        --bubble-assist-bg:#f1f5f9;
        --bubble-assist-border:#e2e8f0;
        --bg-grad: linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%);
      }
      .theme-dark{
        --bg:#0b1220;
        --text:#e5e7eb;
        --surface:rgba(255,255,255,0.06);
        --border:rgba(255,255,255,0.14);
        --muted:rgba(255,255,255,0.55);
        --btn-surface:rgba(255,255,255,0.15);
        --bubble-user-bg:rgba(34,197,94,0.12);
        --bubble-user-border:rgba(34,197,94,0.45);
        --bubble-assist-bg:rgba(255,255,255,0.10);
        --bubble-assist-border:rgba(255,255,255,0.20);
        --bg-grad: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      }

      html, body { height: 100%; margin: 0; font-family: -apple-system, Segoe UI, Roboto, sans-serif; background: var(--bg); color: var(--text); }
      /* Remove default user agent titlebar tint (Windows) by ensuring no page-level accent conflicts */
      body { accent-color: initial; }
      body.theme-default { background: var(--bg-grad); }
      body.theme-professional { background: var(--bg-grad); }
      body.theme-dark { background: var(--bg-grad); }
      .wrap { display: flex; flex-direction: column; height: 100%; }
      /* remove in-page header to maximize space */
      .messages { flex: 1; overflow: auto; padding: 12px; display: flex; flex-direction: column; gap: 10px; }
      .row { display: flex; }
      .row.user { justify-content: flex-end; }
      .bubble { max-width: 78%; padding: 10px 12px; border-radius: 10px; font-size: 12px; line-height: 1.45; }
      .bubble.user { background: var(--bubble-user-bg); border: 1px solid var(--bubble-user-border); }
      .bubble.assistant { background: var(--bubble-assist-bg); border: 1px solid var(--bubble-assist-border); }
      .composer { display: grid; grid-template-columns: 1fr 40px 40px 80px; gap: 8px; padding: 8px 12px 12px; align-items: center; border-top:1px solid var(--border); }
      .ta { box-sizing: border-box; width: 100%; height: 42px; max-height: 180px; resize: vertical; background: var(--surface); border:1px solid var(--border); color:var(--text); padding:10px; border-radius:8px; font-size:12px; }
      .btn { height: 42px; background: var(--btn-surface); border:1px solid var(--border); color:var(--text); border-radius:8px; padding:0 12px; cursor: pointer; display:flex; align-items:center; justify-content:center; }
      .btn:disabled { opacity: .5; cursor: default; }
      .send { font-weight:800; }
      /* Theme-specific send button styling */
      body.theme-default .send { background: linear-gradient(135deg,#667eea,#764ba2); border:1px solid rgba(255,255,255,0.30); color:#ffffff; }
      body.theme-dark .send { background: linear-gradient(135deg,#334155,#1e293b); border:1px solid rgba(255,255,255,0.20); color:#e5e7eb; }
      body.theme-professional .send { background: linear-gradient(135deg,#ffffff,#f1f5f9); border:1px solid #cbd5e1; color:#0f172a; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div id="msgs" class="messages"></div>
      <div style="display:flex; gap:8px; align-items:center; padding: 0 12px 6px;">
        <button id="lm-shot" class="btn" title="LETmeGIRAFFETHATFORYOU Screenshot">üì∏</button>
        <button id="lm-stream" class="btn" title="LETmeGIRAFFETHATFORYOU Stream">üé•</button>
      </div>
      <div class="composer">
        <textarea id="ta" class="ta" placeholder="Type a command for the Orchestrator..."></textarea>
        <input id="file" type="file" multiple style="display:none" />
        <button id="up" class="btn" title="Attach">üìé</button>
        <button id="mic" class="btn" title="Voice input">üéôÔ∏è</button>
        <button id="send" class="btn send">Send</button>
      </div>
    </div>
    <script>
      function launch(mode){
        try{ window.open('opengiraffe://lmgtfy?mode='+encodeURIComponent(mode),'_self') }catch(e){}
      }
      const btnShot = document.getElementById('lm-shot');
      const btnStream = document.getElementById('lm-stream');
      if (btnShot) btnShot.onclick = ()=>launch('screenshot');
      if (btnStream) btnStream.onclick = ()=>launch('stream');
    </script>
    <script src="popup.js"></script>
  </body>
  </html>


